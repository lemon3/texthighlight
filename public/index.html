<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <title>demo</title>
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <div class="page">
      <div id="test">
        <h1>Debitis lorem</h1>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit
        ratione impedit ipsum dolorem eveniet, tenetur commodi excepturi sunt
        in, earum autem molestias velit labore atque nisi molestiae asperiores
        corporis perspiciatis. Neque cupiditate itaque corporis natus est
        exercitationem soluta.
        <p>
          Eum neque, ipsa tempore ex iusto non inventore numquam magnam ut. Eos
          optio assumenda ullam vitae, iure doloremque exercitationem. Minus
          accusamus sint vel eos adipisci culpa architecto animi id eaque
          mollitia enim amet quasi deleniti, ipsa tempora commodi laudantium at
          ab minima aperiam repellat. Unde, odio quisquam explicabo aliquam,
          quia a cupiditate at nulla, eaque magni provident placeat sequi ab
          aspernatur fuga hic nobis sit illo sint. Sequi atque quis, a molestiae
          quam. A nihil facilis quasi molestias hic doloribus dolore numquam
          perferendis impedit. Voluptate error beatae magnam aut velit iusto
          eaque suscipit aliquid cupiditate sunt at iure dolore aspernatur
          dolor, modi voluptatum excepturi, nostrum unde consequatur!
        </p>
        <h2>maiores dolore blanditiis voluptatem</h2>
        <form action="#">
          <input type="text" name="fistname" id="" placeholder="lorem1" />
          <input type="text" name="lastname" id="" placeholder="lorem2" />
          <div></div>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum,
          facilis.
        </form>
        <p>
          commodi aut nesciunt dolor, ratione assumenda ex cumque. Similique a
          dolore rerum ullam adipisci pariatur, delectus obcaecati dolor porro,
          esse ex minus nulla provident voluptatibus mollitia commodi sequi
          voluptates omnis veniam. Reprehenderit, voluptate laudantium eos odio
          provident ad. Voluptate consectetur necessitatibus quia delectus
          debitis dolor dicta perspiciatis rem voluptatem fugit.
        </p>
        <img src="https://placekitten.com/420/280" alt="" />
        <p>
          Quam dolor voluptatem fugiat facere. Maiores numquam corporis sint in
          nisi qui, vero eos quod nobis minima sunt accusantium expedita
          repellat error similique maxime, dolorem saepe ipsa dolor. Mollitia,
          reprehenderit reiciendis perferendis quo voluptatem quia fugiat
          architecto eveniet quasi cum dolor accusantium placeat harum, quis ea.
          Blanditiis quo quaerat fugit impedit eligendi adipisci amet
          dignissimos vitae illo at voluptate enim saepe accusamus minima porro
          ea odio laboriosam magnam sapiente sit exercitationem, natus. Facere,
          quod doloremque doloribus saepe non necessitatibus cum totam
          accusantium modi aliquid iusto ex, neque ratione eum illum. In magni
          impedit fugit consectetur, aperiam iusto ipsam doloribus quas tempora
          alias, sequi. Aliquid quibusdam numquam dolore maiores sapiente sunt
          ab corrupti, beatae eaque distinctio quisquam modi accusantium eum.
          Explicabo autem mollitia repudiandae reiciendis nemo, quas, aperiam
          asperiores nulla soluta quis iste nesciunt totam, repellat? Modi
          laborum doloribus tempore quibusdam necessitatibus dignissimos quod
          explicabo iusto aliquam
        </p>
        <h2>Lorem ipsum dolor sit.</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum
          voluptas, praesentium dignissimos cupiditate, libero sit perferendis
          unde omnis explicabo necessitatibus at neque ad non molestiae rem
          magni? Molestiae, dignissimos suscipit! Architecto corporis blanditiis
          amet. Eveniet nostrum quia nemo odit cumque. Sit rem facere aut
          dolorem libero incidunt consequuntur hic saepe, deserunt provident
          esse. Quam in doloremque ad dolor enim, perferendis animi nam incidunt
          debitis cumque magni omnis quis voluptatem voluptate optio vitae. Eos,
          atque. Suscipit, nihil consequuntur! Obcaecati quibusdam, repellendus
          blanditiis mollitia accusantium, placeat maxime ipsa maiores odio ex.
          Atque itaque quas, error voluptatum et laudantium molestias
          praesentium optio dolorum in temporibus totam hic cupiditate modi, ut
          repellendus obcaecati amet tempora illo laborum mollitia dolore.
        </p>
        <h2>Repellendus dicta voluptate</h2>
        Sit quam magni harum aspernatur! Exercitationem, dolorem. Repudiandae
        cupiditate ullam voluptatum neque quis. rem magnam architecto! Repellat
        asperiores quam quos iste.
        <img
          src="https://placekitten.com/400/300"
          style="display: block; margin: 1em 0"
          alt=""
        />
        Optio debitis enim laboriosam sit odit repellendus id cupiditate earum
        nisi fugit unde fugiat animi quis, nemo omnis nihil quo iusto sint,
        voluptatibus quo iste neque perspiciatis repellendus quasi officiis odio
        veritatis commodi voluptatem! Itaque minima natus, recusandae a
        laboriosam perspiciatis quas magni velit voluptatibus ab.
        <textarea name="" id="textarea" cols="30" rows="10">
Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam optio totam ex hic inventore doloribus beatae neque obcaecati deserunt, maxime fuga, nisi corporis ducimus ab natus, exercitationem perferendis suscipit molestias.</textarea
        >
        <script>
          const lorem = 'lorem';
        </script>
      </div>

      <div class="panel">
        <p>type here:</p>
        <input id="inp" type="text" class="highlight-input" value="" />
        <div id="found"></div>
      </div>
    </div>

    <script src="./texthighlight.js"></script>
    <script>
      // import TextHighlight from './texthighlight.js';

      const getUriParams = () => {
        const query_string = {};
        const query = window.location.search.substring(1);
        const parmsArray = query.split('&');
        if (parmsArray.length <= 0) return query_string;
        parmsArray.forEach((param) => {
          let [key, val] = param.split('=');
          if (val) val = decodeURIComponent(val);
          if ('' !== key) query_string[key] = val;
        });
        return query_string;
      };

      const init = () => {
        document.removeEventListener('DOMContentLoaded', init);
        let hltext = getUriParams().hl || 'lorem';

        // setup
        const found = document.querySelector('#found');
        const options = {
          word: hltext,
        };

        const el = document.querySelectorAll('#test')[0];
        const thl = new TextHighlight(null, options);
        found.innerHTML = thl.getCount();

        const inp = document.querySelector('#inp');

        inp.value = hltext;
        inp.addEventListener('input', (evt) => {
          thl.update(evt.target.value);
          found.innerHTML = thl.getCount();
        });
      };

      if ('complete' === document.readyState) {
        init();
      } else {
        document.addEventListener('DOMContentLoaded', init, false);
      }
    </script>
  </body>
</html>
