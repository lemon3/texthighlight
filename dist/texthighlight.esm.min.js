/*! For license information please see texthighlight.esm.min.js.LICENSE.txt */
var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:String(n)}var o=function(){function t(e,n){var i,o,s,a=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.word;return t.match(e)},(o=r(o="_hasWord"))in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,e?null===(e="string"==typeof e?document.querySelector(e):e)||0===e.length?{error:!0}:(this.options=n,this.settings=Object.assign({},t.defaults,n),this.element=e,this._found=0,void(this.settings.autoinit&&this.init())):{error:!0}}var e,o;return e=t,o=[{key:"_wrapWords",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.word,i=(t.innerText||t.textContent).trim();if(i.length){var r,o='<span class="'.concat(this.settings.className,'">'),s="</span>",a="";if(this.settings.max){var l,c=0,u=0,h=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw s}}}}(i.matchAll(e));try{for(h.s();!(l=h.n()).done;){var f=l.value;if(u=f.index+f[0].length,a+=i.substring(c,u).replace(f[0],o+f[0]+s),this.settings.max&&++this._found===this.settings.max)break;c=u}}catch(t){h.e(t)}finally{h.f()}a+=i.substring(u)}else{if(!(r=i.match(e)))return;this._found+=r.length,a=i.replaceAll(e,"".concat(o,"$&").concat(s))}if(t.append)t.innerHTML=a;else{var g=document.createElement("span");g.innerHTML=a,t.parentNode.replaceChild(g,t),t=g}return t}}},{key:"_childNodesAllowed",value:function(t){var e=!0,n=t.nodeName.toLowerCase();return"script"!==n&&"textarea"!==n||(e=!1),e}},{key:"_hlSection",value:function(t){var e=this,n=(t.innerText||t.textContent).trim();if(!(""===n||this.settings.max&&this._found>=this.settings.max)){var i=t.childNodes;if((1===t.nodeType&&0===t.children.length||0===i.length)&&this._hasWord(n)){var r=this._wrapWords(t);this.settings.highlightSection&&!r.classList.contains(this.settings.sectionClassName)&&r.classList.add(this.settings.sectionClassName)}else i.forEach((function(t){e._childNodesAllowed(t)&&e._hlSection(t)}))}}},{key:"_hl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.element;if(t){if(Array.isArray(t))t=t.join("|");else{var n="/"===t[0]&&"/"===t[t.length-1],i=t.length-(n?2:0);if(n?t=t.substring(1,t.length-1):(t=t.replace(/([()[{*+.$^\\|?])/g,"\\$1"),this.settings.fullwordonly&&(t="\\b"+t+"\\b",this.settings.markwholeWord=!1),this.settings.markwholeWord&&(t="\\w*"+t+"\\w*")),i<this.settings.minInput)return void this.reset()}var r=this.settings.caseSensitive?"g":"gi";this.word=new RegExp(t,r),this._hlSection(e,this.word)}}},{key:"update",value:function(t){var e=(new Date).getMilliseconds();this.reset(),this._hl(t);var n=(new Date).getMilliseconds();console.log(n-e)}},{key:"reset",value:function(){var t=this;this.element.querySelectorAll("."+this.settings.className).forEach((function(t){if(t.parentElement){var e=t.parentElement.innerText;t.parentElement.innerText=e}})),this.settings.highlightSection&&this.element.querySelectorAll("."+this.settings.sectionClassName).forEach((function(e){e.classList.remove(t.settings.sectionClassName)})),this._found=0}},{key:"getCount",value:function(){return this._found}},{key:"init",value:function(){if(this.initialized)return!0;var t=this.settings.word;t&&this._hl(t)}}],o&&i(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();o.defaults={autoinit:!0,word:null,max:100,minInput:2,caseSensitive:!1,fullwordonly:!1,markwholeWord:!1,className:"highlight",highlightSection:!1,sectionClassName:"section-highlight"},t.c=o;var s=t.c;export{s as default};