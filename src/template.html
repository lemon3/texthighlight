<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title><%= htmlWebpackPlugin.options.title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      class="styles"
      data-theme="dark"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark-dimmed.min.css"
      integrity="sha512-zcatBMvxa7rT7dDklfjauWsfiSFParF+hRfCdf4Zr40/MmA1gkFcBRbop0zMpvYF3FmznYFgcL8wlcuO/GwHoA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
      disabled
    />
    <link
      class="styles"
      data-theme="light"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
      integrity="sha512-0aPQyyeZrWj9sCA46UlmWgKOP0mUipLQ6OZXu8l4IcAmD2u31EPEy9VcIMvl7SoAaKe8bLXZhYoMaE/in+gcgA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
      disabled
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      const userPrefersDark =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches;
      const userSetting = window.localStorage.getItem('theme');
      window.current = userSetting || 'system';

      const styles = document.querySelectorAll('.styles');
      const setCss = (theme) => {
        styles.forEach((s) => {
          if (theme === s.dataset.theme) {
            s.removeAttribute('disabled');
          } else {
            s.setAttribute('disabled', 'true');
          }
        });
      };

      if ((userPrefersDark && !userSetting) || 'dark' === userSetting) {
        document.documentElement.classList.add('dark');
        setCss('dark');
      } else {
        setCss('light');
      }

      hljs.highlightAll();
    </script>
    <link rel="stylesheet" href="./css/style.css" />
  </head>

  <body class="dark">
    <div class="page">
      <h1>TextHighlight Demo</h1>
      <p>default usage:</p>
      <pre><code class="language-javascript">const thl = new TextHighlight(document.body, 'lorem');
</code></pre>
      <p>with options, and custom search element</p>
      <pre><code class="language-javascript">const options = {
  autoinit: true,
  search: 'met',
  max: null, // max elements to highlight
  minInput: 2, // min input to trigger highlight
  maxInput: null, // max input to trigger highlight
  caseSensitive: false,
  fullwordonly: false, // mark only if the full word is given
  markwholeWord: true, // mark the whole word (if a part is selected)
  className: 'highlight2', // to style the highlight word
  highlightSection: false, // ad a class to the wrapping html element
  sectionClassName: 'section-highlight', // class name for the wrapping element
};

// only search within this element (#myElement)
const myElement = document.querySelector(myElement, options);
const thl = new TextHighlight(myElement, options);
</code></pre>
      <script>
        const initdemo = () => {
          const options = {
            autoinit: true,
            search: 'met',
            max: null, // max elements to highlight
            minInput: 2, // min input to trigger highlight
            maxInput: null, // max input to trigger highlight
            caseSensitive: false,
            fullwordonly: false, // mark only if the full word is given
            markwholeWord: true, // mark the whole word (if a part is selected)
            className: 'highlight2', // to style the highlight word
            highlightSection: false, // ad a class to the wrapping html element
            sectionClassName: 'section-highlight', // class name for the wrapping element
          };

          // only search within this element (#myElement)
          const myElement = document.querySelector(myElement, options);
          // const thl = new TextHighlight(myElement, options);
        };

        if (
          'complete' === document.readyState ||
          'interactive' === document.readyState
        ) {
          initdemo();
          document.removeEventListener('DOMContentLoaded', initdemo);
        } else {
          document.addEventListener('DOMContentLoaded', initdemo, false);
        }
      </script>

      <h2>Debitis lorem</h2>
      Lorem ipsum dolor sit amet, consectetur
      <span style="text-decoration: underline">adipisicing</span> elit.
      Reprehenderit ratione impedit ipsum dolorem eveniet, tenetur commodi
      excepturi sunt in, earum autem molestias velit labore atque nisi molestiae
      asperiores corporis perspiciatis. Neque cupiditate itaque corporis natus
      est exercitationem soluta.
      <p>
        Eum neque, ipsa tempore ex iusto non
        <span style="text-decoration: underline">inventore</span> numquam magnam
        ut. Eos optio assumenda ullam vitae, iure doloremque exercitationem.
        Minus accusamus sint vel eos adipisci culpa architecto animi id eaque
        mollitia enim amet quasi deleniti, ipsa tempora commodi laudantium at ab
        minima aperiam repellat. Unde, odio quisquam explicabo aliquam, quia a
        cupiditate at nulla, eaque magni provident!
      </p>

      <h2>maiores dolore blanditiis voluptatem</h2>
      <p>
        Sit amet consectetur adipisicing elit. Repellendus, et. Voluptate
        dolorem incidunt voluptatem minima rem dolore molestias suscipit quasi.
      </p>
      <form class="main-form" action="#">
        <h3>Lorem test form</h3>
        <input type="text" name="fistname" id="" placeholder="lorem1" />
        <input type="text" name="lastname" id="" placeholder="lorem2" />
        Quos eligendi ratione corrupti officiis, sequi blanditiis quod sunt
        sapiente. Lorem ipsum dolor sit amet consectetur adipisicing elit.
        Rerum, facilis. Reiciendis perferendis quo voluptatem quia fugiat
        architecto eveniet quasi cum dolor accusantium placeat harum, quis ea.
        Blanditiis quo quaerat fugit impedit eligendi adipisci amet dignissimos
        vitae illo.
      </form>
      <figure>
        <img src="https://placekitten.com/420/280" alt="" />
        <figcaption>The cat named "Lorem"</figcaption>
      </figure>
      <p>
        Quam dolor voluptatem fugiat facere. Maiores numquam corporis sint in
        nisi qui, vero eos quod nobis minima sunt accusantium expedita repellat
        error similique maxime, dolorem saepe ipsa dolor. Mollitia,
        reprehenderit at voluptate enim saepe accusamus minima porro ea odio
        laboriosam magnam sapiente sit exercitationem, natus.
      </p>
      <h2>Lorem ipsum dolor sit.</h2>
      <textarea name="" id="textarea" cols="30" rows="10">
Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam optio totam ex hic inventore doloribus beatae neque obcaecati deserunt, maxime fuga, nisi corporis ducimus ab natus, exercitationem perferendis suscipit molestias.</textarea
      >
      <script>
        const lorem = 'lorem';
      </script>
    </div>

    <div class="panel">
      <p>type here: <span id="found"></span></p>
      <input id="inp" type="text" class="highlight-input" value="" />
    </div>

    <script>
      const init = () => {
        // setup
        const found = document.querySelector('#found');
        const search = document.querySelector('#inp');

        const onInput = (evt) => {
          thl.highlight(evt.target.value);
          const count = thl.getCount();
          let txt = count > 0 ? `#${count}` : '';
          found.innerHTML = txt;
        };

        const startWord = 'lorem';
        const thl = new TextHighlight();
        found.innerHTML = thl.getCount();

        search.addEventListener('input', onInput);
        search.value = startWord;
        search.dispatchEvent(new Event('input'));
        search.focus();
      };

      if (
        'complete' === document.readyState ||
        'interactive' === document.readyState
      ) {
        init();
        document.removeEventListener('DOMContentLoaded', init);
      } else {
        document.addEventListener('DOMContentLoaded', init, false);
      }
    </script>
  </body>
</html>
